Checkerboard={};var gradientColor,orderListened=0;for(Checkerboard.Square=Backbone.Model.extend({initialize:function(){console.log("hello i'm a square")},defaults:function(){return{color:this.randomize()}},randomize:function(){return Math.floor(16777215*Math.random())}}),Checkerboard.SquareView=Backbone.View.extend({className:"square",events:{click:"initailColor"},initialize:function(){var a=$(".square-template").text(),b=_.template(a);this.$el.html(b()),$(".container").append(this.el),this.render()},render:function(){this.$el.css({background:"#"+this.model.get("color").toString(16)}),this.listenForChange()},setGradientColor:function(){gradientColor+=Math.floor(1e-4*gradientColor),this.model.set("color",gradientColor),this.render()},initailColor:function(){orderListened=0,gradientColor=this.model.get("color"),this.setGradientColor()},listenForChange:function(){this.listenToOnce(squares,"change:color",this.setGradientColor)},displayOrder:function(){this.$el.text((orderListened+=1)+("#"+this.model.get("color").toString(16)).toUppercase())}}),Checkerboard.SquareCollection=Backbone.Collection.extend({model:Checkerboard.Square,initialize:function(){this.on("add",function(a){new Checkerboard.SquareView({model:a})})}}),squares=new Checkerboard.SquareCollection,i=0;72>i;i++)squares.add({});